# üîê –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ Yii2

<div align="center">

[![–õ–∏—Ü–µ–Ω–∑–∏—è –ü–û](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square)](LICENSE.md)
[![–í–µ—Ä—Å–∏—è PHP](https://img.shields.io/badge/php-7.2%20to%208.4-blue.svg)](https://php.net)
[![–í–µ—Ä—Å–∏—è Yii2](https://img.shields.io/badge/yii2-%5E2.0.40-green.svg)](https://www.yiiframework.com/)
[![OWASP 2025](https://img.shields.io/badge/OWASP-2025%20Compliant-success.svg)](https://owasp.org/Top10/)
[![NIST 800-63B](https://img.shields.io/badge/NIST-800--63B%202025-blue.svg)](https://pages.nist.gov/800-63-4/sp800-63b.html)

**–ì–∏–±–∫–∏–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –¥–ª—è Yii2**

*–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏*

[–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) ‚Ä¢
[–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞) ‚Ä¢
[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–ø–æ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º) ‚Ä¢
[–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-—Ñ—É–Ω–∫—Ü–∏–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏) ‚Ä¢
[–ü—Ä–∏–º–µ—Ä—ã](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

</div>

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–±–∑–æ—Ä](#-–æ–±–∑–æ—Ä)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#-—Ñ—É–Ω–∫—Ü–∏–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Composer](#—à–∞–≥-1-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-—á–µ—Ä–µ–∑-composer)
  - [–®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π](#—à–∞–≥-2-–∑–∞–ø—É—Å–∫-–º–∏–≥—Ä–∞—Ü–∏–π)
  - [–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—à–∞–≥-3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
  - [–®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)](#—à–∞–≥-4-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–º–∞—Ä—à—Ä—É—Ç–æ–≤-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
  - [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–º–æ–¥—É–ª—è)
  - [–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
  - [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—á—Ç—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–ø–æ—á—Ç—ã)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–ø–æ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º)
  - [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#1-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email](#2-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ-email)
  - [–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è](#3-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ-–ø–∞—Ä–æ–ª—è)
  - [–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#4-—Å–æ—Ü–∏–∞–ª—å–Ω–∞—è-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
  - [–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)](#5-–¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-2fa)
  - [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#6-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ-—á–∞—Å—Ç–æ—Ç—ã-–∑–∞–ø—Ä–æ—Å–æ–≤-–∑–∞—â–∏—Ç–∞-–æ—Ç-brute-force)
  - [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#7-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø—Ä–æ—Ñ–∏–ª–µ–º-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - [–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞](#8-–ø–∞–Ω–µ–ª—å-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
  - [–ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª–∏](#9-–∫–æ–º–∞–Ω–¥—ã-–∫–æ–Ω—Å–æ–ª–∏)
  - [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RBAC](#10-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-rbac)
  - [WebAuthn/Passkeys](#11-webauthpasskeys-–≥–æ—Ç–æ–≤–æ-–∫-–±—É–¥—É—â–µ–º—É)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã](#-–¥–æ—Å—Ç—É–ø–Ω—ã–µ-–º–∞—Ä—à—Ä—É—Ç—ã)
- [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-—Å—Ö–µ–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–°–æ–±—ã—Ç–∏—è](#-—Å–æ–±—ã—Ç–∏—è)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#-—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–∏](#-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–º–∏–≥—Ä–∞—Ü–∏–∏)
- [–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π PHP](#-–ø–æ–¥–¥–µ—Ä–∂–∫–∞-–≤–µ—Ä—Å–∏–π-php)
- [–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º](#-—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–í–Ω–µ—Å–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∞](#-–≤–Ω–µ—Å–µ–Ω–∏–µ-–≤–∫–ª–∞–¥–∞)
- [–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏](#-–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üéØ –û–±–∑–æ—Ä

**Yii2 User** - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –¥–ª—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Yii2. –≠—Ç–æ—Ç —Ñ–æ—Ä–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è **—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å PHP 7.2-8.4** –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–∑ OWASP Top 10:2025 –∏ NIST 800-63B (2025).

### –ü–æ—á–µ–º—É —ç—Ç–æ—Ç —Ñ–æ—Ä–∫?

- ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP**: –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å PHP 7.2 –ø–æ 8.4
- üîí **–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ 2025**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ OWASP Top 10:2025 –∏ NIST 800-63B
- üöÄ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**: 2FA, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ WebAuthn
- üì¶ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
- üîß **–í—ã—Å–æ–∫–∞—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- üìö **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –í—Å–µ–æ–±—ä–µ–º–ª—é—â–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- **–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ email/–ø–∞—Ä–æ–ª—å
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ (Facebook, Google, GitHub, VKontakte –∏ —Ç.–¥.)
  - –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email

- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ö–æ–¥–∞**
  - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å Bcrypt (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏)
  - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å "–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è"
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤—Ö–æ–¥–æ–≤
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è–º–∏**
  - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø–æ email
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è (15+ —Å–∏–º–≤–æ–ª–æ–≤, NIST 800-63B 2025)
  - –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è
  - –û–ø—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è

### üõ°Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TOTP (Time-based One-Time Password)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –ö–æ–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
  - –ü–æ –¥–∞–Ω–Ω—ã–º Microsoft: 99,9% —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ç–∞–∫

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç Brute-Force**
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø–æ IP –¥–ª—è –≥–æ—Å—Ç–µ–π
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
  - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è OWASP Top 10:2025

- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
  - –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (`random_int()`)
  - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ SHA-256 –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∫–æ–¥–æ–≤
  - –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –§–∏—à–µ—Ä–∞-–ô–µ–π—Ç—Å–∞ –¥–ª—è —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è
  - –ó–∞—â–∏—Ç–∞ CSRF –Ω–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ XSS —á–µ—Ä–µ–∑ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
  - –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

- **–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ (—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏)
  - –í—ã–±–æ—Ä —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
  - –û—Ç–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è

- **–§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ (—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π RBAC)
  - –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üåê –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ OAuth:

- Google
- Facebook
- GitHub
- VKontakte (VK)
- Twitter
- LinkedIn
- Yandex

–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤!

### üíª –£–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- **–ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª–∏**
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ CLI
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
  - –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π
  - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**
  - –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –º–∞–∫–µ—Ç—ã
  - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ —Ñ–æ—Ä–º
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
  - –ì–∏–±–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–æ–≤**
  - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
  - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üîí –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–∑ **OWASP Top 10:2025** (RC1 - –Ω–æ—è–±—Ä—å 2025) –∏ **NIST 800-63B (2025)**:

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π

| –§—É–Ω–∫—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞–Ω–¥–∞—Ä—Ç |
|---------|-----------|----------|
| **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞** | 15 —Å–∏–º–≤–æ–ª–æ–≤ | NIST 800-63B 2025 |
| **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞** | 72 —Å–∏–º–≤–æ–ª–∞ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Bcrypt |
| **–ê–ª–≥–æ—Ä–∏—Ç–º —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** | Bcrypt | –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç |
| **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏** | 10-15 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ) | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è OWASP |
| **–†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è** | –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –§–∏—à–µ—Ä–∞-–ô–µ–π—Ç—Å–∞ | –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ |

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –ó–∞—â–∏—Ç–∞ –æ—Ç | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ |
|---------|-----------|--------|
| **2FA/TOTP** | –ö—Ä–∞–∂–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | 99,9% —Å–Ω–∏–∂–µ–Ω–∏–µ –∞—Ç–∞–∫ (Microsoft) |
| **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã** | Brute-force, –ø–æ–¥–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞—Ä—é | OWASP Top 10:2025 A07 |
| **–¢–æ–∫–µ–Ω—ã SHA-256** | –ö–æ–ª–ª–∏–∑–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –ø–æ–¥–¥–µ–ª–∫–∞ | –û–¥–æ–±—Ä–µ–Ω–æ NIST |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å** | –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ç–æ–∫–µ–Ω—ã | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `random_int()` |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π** | –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–µ—Å—Å–∏–∏ | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏ cookie |

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

- ‚úÖ **OWASP Top 10:2025** - A07: –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ **NIST 800-63B (2025)** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ **PHP Security Best Practices 2025** - –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ PHP
- ‚úÖ **GDPR Ready** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **PCI DSS Friendly** - –î–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-----------|--------|-----------|
| **PHP** | 7.2 - 8.4 | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö |
| **Yii2** | ^2.0.40 | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | MySQL 5.7+, PostgreSQL 9.6+, SQLite 3 | InnoDB –¥–ª—è MySQL |
| **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è PHP** | mbstring, openssl, pdo | –û–±—ã—á–Ω–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã |
| **Mailer** | yii2-symfonymailer ^2.0.3\|^3.0\|^4.0 | –î–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ email |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è |
|---------|--------|---------|
| **2FA (PHP 7.2-8.0)** | hiqdev/yii2-mfa | –ü–æ—Å–ª–µ–¥–Ω—è—è |
| **2FA (PHP 8.1+)** | simialbi/yii2-mfa | ^1.0 (–∞–ø—Ä–µ–ª—å 2025) |
| **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π 2FA** | vxm/yii2-mfa | –ü–æ—Å–ª–µ–¥–Ω—è—è |
| **WebAuthn/Passkeys** | lbuchs/webauthn | ^3.0 |
| **reCAPTCHA** | google/recaptcha | ^1.2 |
| **HTTP Client** | yiisoft/yii2-httpclient | ^2.0 |

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Composer

```bash
composer require alexeikadev/yii2-user "dev-master"
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations
```

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `user` - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `profile` - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `social_account` - –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `token` - –¢–æ–∫–µ–Ω—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏** (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π):
```bash
# –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 2FA
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations
# –í–∫–ª—é—á–∞–µ—Ç: m251111_120000_add_two_factor_columns.php
# –î–æ–±–∞–≤–ª—è–µ—Ç: two_factor_enabled, two_factor_secret

# –î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã
# –í–∫–ª—é—á–µ–Ω–æ –≤ —Ç—É –∂–µ –º–∏–≥—Ä–∞—Ü–∏—é: m251111_120100_add_rate_limiting_columns.php
# –î–æ–±–∞–≤–ª—è–µ—Ç: allowance, allowance_updated_at
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à —Ñ–∞–π–ª `config/web.php`:

```php
return [
    'modules' => [
        'user' => [
            'class' => 'AlexeiKaDev\Yii2User\Module',
            // –°–º. —Ä–∞–∑–¥–µ–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –æ–ø—Ü–∏–π
        ],
    ],
    'components' => [
        'user' => [
            'identityClass' => 'AlexeiKaDev\Yii2User\models\User',
            'enableAutoLogin' => true,
            'loginUrl' => ['/user/security/login'],
            'identityCookie' => [
                'name' => '_identity',
                'httpOnly' => true,
                'secure' => true, // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ true –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS
            ],
        ],
    ],
];
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à —Ñ–∞–π–ª `config/console.php` –¥–ª—è –∫–æ–º–∞–Ω–¥ –∫–æ–Ω—Å–æ–ª–∏:

```php
return [
    'modules' => [
        'user' => [
            'class' => 'AlexeiKaDev\Yii2User\Module',
        ],
    ],
];
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è

–í–æ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏:

```php
'modules' => [
    'user' => [
        'class' => 'AlexeiKaDev\Yii2User\Module',

        // –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
        'enableRegistration' => true,
        'enableConfirmation' => true,
        'enablePasswordRecovery' => true,
        'enableUnconfirmedLogin' => false,
        'enableGeneratingPassword' => false,
        'enableFlashMessages' => true,

        // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
        'confirmWithin' => 86400,  // 24 —á–∞—Å–∞
        'recoverWithin' => 21600,  // 6 —á–∞—Å–æ–≤
        'rememberFor' => 1209600,  // 14 –¥–Ω–µ–π

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ä–æ–ª—è
        'cost' => 12, // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ Bcrypt (10-15)

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        'admins' => ['admin', 'superadmin'], // –ò–º–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
        'adminPermission' => null, // –ò–ª–∏ RBAC —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–∫ 'admin'

        // –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–º–µ–Ω—ã email
        // STRATEGY_INSECURE - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
        // STRATEGY_DEFAULT - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ–π –ø–æ—á—Ç—ã
        // STRATEGY_SECURE - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π –ø–æ—á—Ç—ã
        'emailChangeStrategy' => \AlexeiKaDev\Yii2User\Module::STRATEGY_SECURE,

        // –ü—Ä–∞–≤–∏–ª–∞ URL (–µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã)
        'urlRules' => [
            '<id:\d+>' => 'profile/show',
            '<action:(login|logout)>' => 'security/<action>',
            '<action:(register|resend)>' => 'registration/<action>',
            'confirm/<id:\d+>/<code:[A-Za-z0-9_-]+>' => 'registration/confirm',
            'forgot' => 'recovery/request',
            'recover/<id:\d+>/<code:[A-Za-z0-9_-]+>' => 'recovery/reset',
            'settings/<action:\w+>' => 'settings/<action>',
        ],

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
        'modelMap' => [
            'User' => 'app\models\User',
            'Profile' => 'app\models\Profile',
            // –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ –µ—Å–ª–∏ –≤—ã –∏—Ö —Ä–∞—Å—à–∏—Ä—è–µ—Ç–µ
        ],

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
        'controllerMap' => [
            // 'registration' => 'app\controllers\user\RegistrationController',
        ],
    ],
],
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—á—Ç—ã

```php
'components' => [
    'mailer' => [
        'class' => 'yii\symfonymailer\Mailer',
        'transport' => [
            'scheme' => 'smtp',
            'host' => 'smtp.gmail.com',
            'username' => '–≤–∞—à-email@gmail.com',
            'password' => '–≤–∞—à-–ø–∞—Ä–æ–ª—å-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
            'port' => 587,
            'encryption' => 'tls',
        ],
        'viewPath' => '@app/mail',
        'useFileTransport' => false,
    ],
],
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ—á—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã email, —Å–æ–∑–¥–∞–≤ —Å–≤–æ–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:

```php
// –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª—è
'modules' => [
    'user' => [
        // ...
        'mailer' => [
            'sender' => ['no-reply@example.com' => '–ú–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'],
            'welcomeSubject' => '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!',
            'confirmationSubject' => '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à email',
            'reconfirmationSubject' => '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à –Ω–æ–≤—ã–π email',
            'recoverySubject' => '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å',
        ],
    ],
],
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```php
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –∞–¥—Ä–µ—Å—É:
http://yourapp.com/user/registration/register

// –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
// 1. –£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è (–Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–∞—è –µ—Å–ª–∏ enableConfirmation=true)
// 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
// 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –≤ –ø–∏—Å—å–º–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
// 4. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```php
use AlexeiKaDev\Yii2User\models\User;

$user = new User();
$user->scenario = 'register';
$user->username = 'john_doe';
$user->email = 'john@example.com';
$user->password = 'securePassword123456'; // –ú–∏–Ω 15 —Å–∏–º–≤–æ–ª–æ–≤

if ($user->register()) {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
    // –ü–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
    echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —Å ID: " . $user->id;
} else {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    print_r($user->errors);
}
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–†–∞—Å—à–∏—Ä—å—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –¥–æ–±–∞–≤–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è:

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\RegistrationForm as BaseRegistrationForm;

class RegistrationForm extends BaseRegistrationForm
{
    public $phone;
    public $company;

    public function rules()
    {
        $rules = parent::rules();
        $rules[] = ['phone', 'string', 'max' => 20];
        $rules[] = ['company', 'string', 'max' => 100];
        return $rules;
    }

    public function register()
    {
        if (!$this->validate()) {
            return false;
        }

        // –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–µ—Ç–æ–¥
        $user = parent::register();

        if ($user) {
            // –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
            $user->profile->phone = $this->phone;
            $user->profile->company = $this->company;
            $user->profile->save();
        }

        return $user;
    }
}
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```php
'modules' => [
    'user' => [
        'modelMap' => [
            'RegistrationForm' => 'app\models\RegistrationForm',
        ],
    ],
],
```

---

### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```php
'modules' => [
    'user' => [
        'enableConfirmation' => true,
        'enableUnconfirmedLogin' => false, // –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥ –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º?
        'confirmWithin' => 86400, // –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 24 —á–∞—Å–∞
    ],
],
```

#### –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

```php
use AlexeiKaDev\Yii2User\models\User;

$user = User::findOne(['email' => 'user@example.com']);
if ($user && !$user->isConfirmed) {
    $user->confirm();
    echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!";
}
```

#### –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

```php
// URL: /user/registration/resend
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–≤–æ–¥—è—Ç —Å–≤–æ–π email –∞–¥—Ä–µ—Å
// –ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
```

---

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

#### –ü—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```php
// –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
http://yourapp.com/user/recovery/request

// –®–∞–≥ 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–∏—Å—å–º–æ —Å–æ —Å—Å—ã–ª–∫–æ–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
http://yourapp.com/user/recovery/reset?id=123&code=abc123

// –®–∞–≥ 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
// –®–∞–≥ 4: –ü–∞—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

```php
use AlexeiKaDev\Yii2User\models\User;
use AlexeiKaDev\Yii2User\models\Token;
use AlexeiKaDev\Yii2User\models\enums\TokenType;

$user = User::findOne(['email' => 'user@example.com']);

// –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
$token = Yii::createObject([
    'class' => Token::class,
    'user_id' => $user->id,
    'type' => TokenType::RECOVERY,
]);
$token->save();

// –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–∏—Å—å–º–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å –ø–æ—á—Ç—ã
// ...

// –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–∫–µ–Ω
if ($token->isValid) {
    $user->password = 'newSecurePassword123456';
    $user->save();
    $token->delete();
}
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\User as BaseUser;

class User extends BaseUser
{
    public function rules()
    {
        $rules = parent::rules();

        // –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–∞—Ä–æ–ª—è
        $rules[] = ['password', function($attribute) {
            $password = $this->$attribute;

            // –¢—Ä–µ–±—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –ø—Ä–æ–ø–∏—Å–Ω—É—é –±—É–∫–≤—É
            if (!preg_match('/[A-Z]/', $password)) {
                $this->addError($attribute, '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –ø—Ä–æ–ø–∏—Å–Ω—É—é –±—É–∫–≤—É.');
            }

            // –¢—Ä–µ–±—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É
            if (!preg_match('/[0-9]/', $password)) {
                $this->addError($attribute, '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É.');
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
            $commonPasswords = ['password123456789', 'qwerty12345678'];
            if (in_array(strtolower($password), $commonPasswords)) {
                $this->addError($attribute, '–ü–∞—Ä–æ–ª—å —Å–ª–∏—à–∫–æ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω.');
            }
        }];

        return $rules;
    }
}
```

---

### 4. –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ OAuth

```php
'components' => [
    'authClientCollection' => [
        'class' => 'yii\authclient\Collection',
        'clients' => [
            'google' => [
                'class' => 'AlexeiKaDev\Yii2User\clients\Google',
                'clientId' => '–≤–∞—à-google-client-id',
                'clientSecret' => '–≤–∞—à-google-client-secret',
            ],
            'facebook' => [
                'class' => 'AlexeiKaDev\Yii2User\clients\Facebook',
                'clientId' => '–≤–∞—à-facebook-app-id',
                'clientSecret' => '–≤–∞—à-facebook-app-secret',
            ],
            'github' => [
                'class' => 'AlexeiKaDev\Yii2User\clients\GitHub',
                'clientId' => '–≤–∞—à-github-client-id',
                'clientSecret' => '–≤–∞—à-github-client-secret',
            ],
            'vkontakte' => [
                'class' => 'AlexeiKaDev\Yii2User\clients\VKontakte',
                'clientId' => '–≤–∞—à-vk-app-id',
                'clientSecret' => '–≤–∞—à-vk-app-secret',
            ],
        ],
    ],
],
```

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≤—Ö–æ–¥–∞

```php
// –í –≤–∞—à–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –≤—Ö–æ–¥–∞
<?= \AlexeiKaDev\Yii2User\widgets\Connect::widget([
    'baseAuthUrl' => ['/user/security/auth'],
]) ?>
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

```php
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ –∞–¥—Ä–µ—Å—É:
http://yourapp.com/user/settings/networks

// –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤–æ –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞
// –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä OAuth

```php
namespace app\clients;

use yii\authclient\OAuth2;

class CustomProvider extends OAuth2
{
    public $authUrl = 'https://provider.com/oauth/authorize';
    public $tokenUrl = 'https://provider.com/oauth/token';
    public $apiBaseUrl = 'https://api.provider.com';

    protected function initUserAttributes()
    {
        return $this->api('user', 'GET');
    }

    protected function defaultName()
    {
        return 'custom_provider';
    }

    protected function defaultTitle()
    {
        return 'Custom Provider';
    }
}
```

---

### 5. –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)

**–î–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Microsoft**: –í–∫–ª—é—á–µ–Ω–∏–µ 2FA —Å–Ω–∏–∂–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ç–∞–∫–∏ –Ω–∞ **99,9%**.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –î–ª—è PHP 7.2-8.0
composer require hiqdev/yii2-mfa

# –î–ª—è PHP 8.1+ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –∞–ø—Ä–µ–ª—å 2025)
composer require simialbi/yii2-mfa

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
composer require vxm/yii2-mfa
```

#### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations
```

–≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç:
- `two_factor_enabled` (–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- `two_factor_secret` (—Å—Ç—Ä–æ–∫–∞)

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è TwoFactorInterface

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\User as BaseUser;
use AlexeiKaDev\Yii2User\interfaces\TwoFactorInterface;

class User extends BaseUser implements TwoFactorInterface
{
    public function getIsTwoFactorEnabled()
    {
        return (bool)$this->two_factor_enabled;
    }

    public function getTwoFactorSecret()
    {
        return $this->two_factor_secret;
    }

    public function setTwoFactorSecret($secret)
    {
        $this->two_factor_secret = $secret;
        return $this->save(false, ['two_factor_secret']);
    }

    public function enableTwoFactor()
    {
        $this->two_factor_enabled = 1;
        return $this->save(false, ['two_factor_enabled']);
    }

    public function disableTwoFactor()
    {
        $this->two_factor_enabled = 0;
        $this->two_factor_secret = null;
        return $this->save(false, ['two_factor_enabled', 'two_factor_secret']);
    }
}
```

#### –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ 2FA

```php
use hiqdev\yii2\mfa\GoogleAuthenticator;

// 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$ga = new GoogleAuthenticator();
$secret = $ga->createSecret();

// 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å)
Yii::$app->user->identity->setTwoFactorSecret($secret);

// 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
$qrCodeUrl = $ga->getQRCodeGoogleUrl(
    'My App',
    $secret,
    'user@example.com'
);

// 4. –û—Ç–æ–±—Ä–∞–∑–∏—Ç–µ QR-–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
echo '<img src="' . $qrCodeUrl . '" />';

// 5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Google Authenticator, Authy –∏ —Ç.–¥.)
// 6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
$code = $_POST['code'];
if ($ga->verifyCode($secret, $code)) {
    Yii::$app->user->identity->enableTwoFactor();
    echo "2FA —É—Å–ø–µ—à–Ω–æ –≤–∫–ª—é—á–µ–Ω!";
}
```

#### –ü—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞ —Å 2FA

```php
// –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—è:
if (Yii::$app->user->identity->getIsTwoFactorEnabled()) {
    // –û—Ç–æ–±—Ä–∞–∑–∏—Ç–µ –≤–≤–æ–¥ –∫–æ–¥–∞ 2FA
    $code = $_POST['two_factor_code'];

    $ga = new GoogleAuthenticator();
    $secret = Yii::$app->user->identity->getTwoFactorSecret();

    if ($ga->verifyCode($secret, $code, 2)) { // 2 = –¥–æ–ø—É—Å–∫ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
        // –ö–æ–¥ –≤–µ—Ä–µ–Ω, –∑–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Ö–æ–¥
        return $this->goHome();
    } else {
        // –ö–æ–¥ –Ω–µ–≤–µ—Ä–µ–Ω
        Yii::$app->session->setFlash('error', '–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ 2FA');
    }
}
```

---

### 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç Brute-Force)

OWASP Top 10:2025 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–¥–±–æ—Ä–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∞—Ç–∞–∫ brute-force.

#### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations
```

–≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç:
- `allowance` (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)
- `allowance_updated_at` (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è RateLimitableInterface

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\User as BaseUser;
use AlexeiKaDev\Yii2User\interfaces\RateLimitableInterface;

class User extends BaseUser implements RateLimitableInterface
{
    /**
     * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏–º–∏—Ç —á–∞—Å—Ç–æ—Ç—ã: [–∑–∞–ø—Ä–æ—Å—ã, —Å–µ–∫—É–Ω–¥—ã]
     */
    public function getRateLimit($request, $action)
    {
        // 5 –ø–æ–ø—ã—Ç–æ–∫ –≤ 60 —Å–µ–∫—É–Ω–¥
        return [5, 60];

        // –ò–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞:
        // return $this->isAdmin ? [100, 60] : [5, 60];
    }

    public function loadAllowance($request, $action)
    {
        return [
            $this->allowance,
            $this->allowance_updated_at
        ];
    }

    public function saveAllowance($request, $action, $allowance, $timestamp)
    {
        $this->allowance = $allowance;
        $this->allowance_updated_at = $timestamp;
        $this->save(false, ['allowance', 'allowance_updated_at']);
    }
}
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—è —á–∞—Å—Ç–æ—Ç—ã

```php
use AlexeiKaDev\Yii2User\filters\RateLimitFilter;

class SecurityController extends Controller
{
    public function behaviors()
    {
        return [
            'rateLimiter' => [
                'class' => RateLimitFilter::class,
                'only' => ['login'], // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫ –¥–µ–π—Å—Ç–≤–∏—é –≤—Ö–æ–¥–∞
                'enableForGuests' => true, // –í–∫–ª—é—á–∏—Ç—å –¥–ª—è –Ω–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                'maxRequests' => 5, // –ú–∞–∫—Å–∏–º—É–º 5 –∑–∞–ø—Ä–æ—Å–æ–≤
                'timeWindow' => 60, // –ó–∞ 60 —Å–µ–∫—É–Ω–¥
            ],
        ];
    }

    public function actionLogin()
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞
    }
}
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —á–∞—Å—Ç–æ—Ç—ã

```php
'rateLimiter' => [
    'class' => RateLimitFilter::class,
    'only' => ['login'],
    'user' => function () {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        $username = Yii::$app->request->post('LoginForm')['login'] ?? null;
        if ($username) {
            return User::findByUsername($username);
        }
        return null;
    },
    'tooManyRequestsHttpCode' => 429,
    'errorMessage' => '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ {n} —Å–µ–∫—É–Ω–¥.',
],
```

---

### 7. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ü–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Email
- –ò–º—è (–ø–µ—Ä–≤–æ–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ)
- –û—Ç–∫—Ä—ã—Ç—ã–π email
- –í–µ–±-—Å–∞–π—Ç
- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- –ë–∏–æ–≥—Ä–∞—Ñ–∏—è/–û–ø–∏—Å–∞–Ω–∏–µ
- –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- Email Gravatar

#### –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```php
// –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$profile = Yii::$app->user->identity->profile;

echo $profile->name;
echo $profile->location;
echo $profile->bio;
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

```php
use AlexeiKaDev\Yii2User\models\Profile;

$profile = Yii::$app->user->identity->profile;
$profile->name = 'John Doe';
$profile->location = 'New York, USA';
$profile->bio = '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏ —ç–Ω—Ç—É–∑–∏–∞—Å—Ç –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞';
$profile->save();
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è

–†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å Profile:

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\Profile as BaseProfile;

class Profile extends BaseProfile
{
    // –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –º–∏–≥—Ä–∞—Ü–∏—é —Å–Ω–∞—á–∞–ª–∞
    // ALTER TABLE profile ADD COLUMN phone VARCHAR(20);
    // ALTER TABLE profile ADD COLUMN company VARCHAR(100);

    public function rules()
    {
        $rules = parent::rules();
        $rules[] = ['phone', 'string', 'max' => 20];
        $rules[] = ['company', 'string', 'max' => 100];
        return $rules;
    }

    public function attributeLabels()
    {
        $labels = parent::attributeLabels();
        $labels['phone'] = '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞';
        $labels['company'] = '–ö–æ–º–ø–∞–Ω–∏—è';
        return $labels;
    }
}
```

–û–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π:

```php
'modules' => [
    'user' => [
        'modelMap' => [
            'Profile' => 'app\models\Profile',
        ],
    ],
],
```

---

### 8. –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

```php
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
'modules' => [
    'user' => [
        'admins' => ['admin', 'superadmin'],
    ],
],

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ RBAC
'modules' => [
    'user' => [
        'adminPermission' => 'manageUsers',
    ],
],
```

#### –ú–∞—Ä—à—Ä—É—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```
/user/admin/index          - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
/user/admin/create         - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/user/admin/update?id=1    - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/user/admin/delete?id=1    - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/user/admin/confirm?id=1   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/user/admin/block?id=1     - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/user/admin/switch?id=1    - –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```php
use AlexeiKaDev\Yii2User\models\User;

// –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$user = new User();
$user->scenario = 'create';
$user->username = 'newuser';
$user->email = 'newuser@example.com';
$user->password = 'securePassword123456';
$user->save();

// –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$user = User::findOne($userId);
$user->confirm();

// –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$user->block();

// –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$user->unblock();

// –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
$user->delete();
```

---

### 9. –ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª–∏

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./yii user/create <username> <email> <password>

# –ü—Ä–∏–º–µ—Ä
./yii user/create admin admin@example.com SecurePass123456

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./yii user/confirm <username>

# –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
./yii user/password <username> <new-password>

# –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./yii user/delete <username>
```

#### –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```php
#!/usr/bin/env php
<?php
// scripts/bulk-create-users.php

require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/../vendor/yiisoft/yii2/Yii.php';

$application = new yii\console\Application([
    'id' => 'bulk-users',
    'basePath' => __DIR__ . '/..',
    'components' => [
        'db' => require(__DIR__ . '/../config/db.php'),
    ],
]);

use AlexeiKaDev\Yii2User\models\User;

$users = [
    ['user1', 'user1@example.com'],
    ['user2', 'user2@example.com'],
    ['user3', 'user3@example.com'],
];

foreach ($users as list($username, $email)) {
    $user = new User();
    $user->scenario = 'create';
    $user->username = $username;
    $user->email = $email;
    $user->password = 'TempPassword123456';

    if ($user->save()) {
        echo "–°–æ–∑–¥–∞–Ω: $username\n";
        $user->confirm(); // –ê–≤—Ç–æ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    } else {
        echo "–û—à–∏–±–∫–∞: $username - " . json_encode($user->errors) . "\n";
    }
}
```

---

### 10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RBAC

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RBAC

```php
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è authManager
'components' => [
    'authManager' => [
        'class' => 'yii\rbac\DbManager',
    ],
],
```

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

```php
use yii\rbac\DbManager;

$auth = Yii::$app->authManager;

// –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
$manageUsers = $auth->createPermission('manageUsers');
$manageUsers->description = '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏';
$auth->add($manageUsers);

$viewUsers = $auth->createPermission('viewUsers');
$viewUsers->description = '–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π';
$auth->add($viewUsers);

// –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ–ª–∏
$admin = $auth->createRole('admin');
$auth->add($admin);

$moderator = $auth->createRole('moderator');
$auth->add($moderator);

// –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ä–æ–ª—è–º
$auth->addChild($admin, $manageUsers);
$auth->addChild($admin, $viewUsers);
$auth->addChild($moderator, $viewUsers);

// –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
$auth->assign($admin, $userId);
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

```php
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
if (!Yii::$app->user->can('manageUsers')) {
    throw new ForbiddenHttpException('–í–∞–º –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ.');
}

// –í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö
<?php if (Yii::$app->user->can('manageUsers')): ?>
    <a href="/user/admin/create">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
<?php endif; ?>
```

---

### 11. WebAuthn/Passkeys (–≥–æ—Ç–æ–≤–æ –∫ –±—É–¥—É—â–µ–º—É)

**WebAuthn** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ 2025 –≥–æ–¥—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 98% –±—Ä–∞—É–∑–µ—Ä–æ–≤.

#### –ß—Ç–æ —Ç–∞–∫–æ–µ Passkeys?

- –ù–µ—Ç –ø–∞—Ä–æ–ª–µ–π –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–ª–∏ –∫—Ä–∞–∂–∏
- –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ—Ç–ø–µ—á–∞—Ç–æ–∫ –ø–∞–ª—å—Ü–∞, Face ID)
- –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (YubiKey)
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∏—à–∏–Ω–≥–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç FIDO2/WebAuthn

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
composer require lbuchs/webauthn
```

#### –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```php
use lbuchs\WebAuthn\WebAuthn;
use lbuchs\WebAuthn\Binary\ByteBuffer;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ WebAuthn
$webAuthn = new WebAuthn('My App', 'example.com', ['https://example.com']);

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
$createArgs = $webAuthn->getCreateArgs(
    ByteBuffer::fromBase64Url($userId),
    $username,
    $userDisplayName,
    30, // timeout –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    false, // requireResidentKey
    false, // requireUserVerification
);

// –û—Ç–ø—Ä–∞–≤—å—Ç–µ $createArgs –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É JavaScript
// –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ

// –ü—Ä–æ–≤–µ—Ä–∫–∞
$clientDataJSON = $_POST['clientDataJSON'];
$attestationObject = $_POST['attestationObject'];
$challenge = $_SESSION['challenge'];

$data = $webAuthn->processCreate(
    $clientDataJSON,
    $attestationObject,
    $challenge,
    true, // requireUserVerification
    true, // requireUserPresence
);

// –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ $data->credentialId –∏ $data->credentialPublicKey –¥–ª—è –±—É–¥—É—â–µ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebAuthn —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ JavaScript –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –°–º–æ—Ç—Ä–∏—Ç–µ [lbuchs/WebAuthn](https://github.com/lbuchs/WebAuthn) –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–Ω—è—Ç–∏–µ–º —É—Å–ª–æ–≤–∏–π

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\RegistrationForm as BaseRegistrationForm;

class RegistrationForm extends BaseRegistrationForm
{
    public $terms_accepted;

    public function rules()
    {
        $rules = parent::rules();
        $rules[] = ['terms_accepted', 'required'];
        $rules[] = ['terms_accepted', 'compare', 'compareValue' => 1,
                    'message' => '–í—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è'];
        return $rules;
    }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ email

```php
namespace app\models;

use AlexeiKaDev\Yii2User\models\User as BaseUser;

class User extends BaseUser
{
    public function rules()
    {
        $rules = parent::rules();

        $rules[] = ['email', function($attribute) {
            $allowedDomains = ['company.com', 'partner.com'];
            $email = $this->$attribute;
            $domain = substr(strrchr($email, "@"), 1);

            if (!in_array($domain, $allowedDomains)) {
                $this->addError($attribute, '–†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ email –∞–¥—Ä–µ—Å–∞ –∫–æ–º–ø–∞–Ω–∏–∏.');
            }
        }];

        return $rules;
    }
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```php
use AlexeiKaDev\Yii2User\events\UserEvent;
use AlexeiKaDev\Yii2User\models\User;

// –í Bootstrap –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
Event::on(User::class, User::EVENT_AFTER_REGISTER, function ($event) {
    $user = $event->user;

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å 'user'
    $auth = Yii::$app->authManager;
    $role = $auth->getRole('user');
    $auth->assign($role, $user->id);
});
```

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è

```php
// controllers/ProfileController.php
namespace app\controllers;

use yii\web\Controller;
use AlexeiKaDev\Yii2User\models\User;

class ProfileController extends Controller
{
    public function actionView($username)
    {
        $user = User::findOne(['username' => $username]);

        if (!$user || $user->isBlocked) {
            throw new NotFoundHttpException('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }

        return $this->render('view', [
            'user' => $user,
            'profile' => $user->profile,
        ]);
    }
}
```

### –ü—Ä–∏–º–µ—Ä 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ email –ø–µ—Ä–µ–¥ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```php
public function actionDeleteAccount()
{
    $user = Yii::$app->user->identity;

    // –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    $token = $this->createVerificationToken($user);
    $this->sendConfirmationEmail($user, $token);

    Yii::$app->session->setFlash('info',
        '–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–∏—Å—å–º–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.');

    return $this->redirect(['index']);
}

public function actionConfirmDelete($token)
{
    if ($this->verifyToken($token)) {
        $user = Yii::$app->user->identity;
        $user->delete();
        Yii::$app->user->logout();

        return $this->goHome();
    }

    throw new BadRequestHttpException('–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω');
}
```

---

## üó∫Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### –û—Ç–∫—Ä—ã—Ç—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

| –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|
| `/user/registration/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/registration/resend` | –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| `/user/registration/confirm` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email |
| `/user/security/login` | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/security/logout` | –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/security/auth` | –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `/user/recovery/request` | –ó–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è |
| `/user/recovery/reset` | –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

| –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|
| `/user/settings/profile` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è |
| `/user/settings/account` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ |
| `/user/settings/networks` | –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ |
| `/user/settings/delete` | –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ |
| `/user/profile/show?id=1` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –ú–∞—Ä—à—Ä—É—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

| –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|
| `/user/admin/index` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| `/user/admin/create` | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/admin/update?id=1` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/admin/delete?id=1` | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/admin/confirm?id=1` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/admin/block?id=1` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/user/admin/switch?id=1` | –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ User

```sql
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `password_hash` varchar(60) NOT NULL,
  `auth_key` varchar(32) NOT NULL,
  `confirmed_at` int(11) DEFAULT NULL,
  `unconfirmed_email` varchar(255) DEFAULT NULL,
  `blocked_at` int(11) DEFAULT NULL,
  `registration_ip` varchar(45) DEFAULT NULL,
  `created_at` int(11) NOT NULL,
  `updated_at` int(11) NOT NULL,
  `flags` int(11) NOT NULL DEFAULT '0',
  `last_login_at` int(11) DEFAULT NULL,
  `two_factor_enabled` tinyint(1) DEFAULT '0',
  `two_factor_secret` varchar(255) DEFAULT NULL,
  `allowance` int(11) DEFAULT '0',
  `allowance_updated_at` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_unique_username` (`username`),
  UNIQUE KEY `user_unique_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

### –¢–∞–±–ª–∏—Ü–∞ Profile

```sql
CREATE TABLE `profile` (
  `user_id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  `public_email` varchar(255) DEFAULT NULL,
  `gravatar_email` varchar(255) DEFAULT NULL,
  `gravatar_id` varchar(32) DEFAULT NULL,
  `location` varchar(255) DEFAULT NULL,
  `website` varchar(255) DEFAULT NULL,
  `bio` text,
  `timezone` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  CONSTRAINT `fk_user_profile` FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

### –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

```sql
CREATE TABLE `social_account` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `provider` varchar(255) NOT NULL,
  `client_id` varchar(255) NOT NULL,
  `data` text,
  `code` varchar(32) DEFAULT NULL,
  `created_at` int(11) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `username` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `account_unique` (`provider`,`client_id`),
  KEY `fk_user_account` (`user_id`),
  CONSTRAINT `fk_user_account` FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

### –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–∫–µ–Ω–æ–≤

```sql
CREATE TABLE `token` (
  `user_id` int(11) NOT NULL,
  `code` varchar(32) NOT NULL,
  `created_at` int(11) NOT NULL,
  `type` smallint(6) NOT NULL,
  UNIQUE KEY `token_unique` (`user_id`,`code`,`type`),
  CONSTRAINT `fk_user_token` FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

---

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ª—é–±–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, —Å–∫–æ–ø–∏—Ä–æ–≤–∞–≤ –µ–≥–æ –≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```
@app/views/user/registration/register.php  ‚Üí –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
@app/views/user/security/login.php         ‚Üí –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
@app/views/user/settings/profile.php       ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ñ–∏–ª—è
@app/views/user/admin/index.php            ‚Üí –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

```php
namespace app\controllers\user;

use AlexeiKaDev\Yii2User\controllers\RegistrationController as BaseController;

class RegistrationController extends BaseController
{
    public function actionRegister()
    {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

        $result = parent::actionRegister();

        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

        return $result;
    }
}
```

–û–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:

```php
'modules' => [
    'user' => [
        'controllerMap' => [
            'registration' => 'app\controllers\user\RegistrationController',
        ],
    ],
],
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥–µ–ª–∏

–†–∞—Å—à–∏—Ä—å—Ç–µ –ª—é–±—É—é –º–æ–¥–µ–ª—å –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π:

```php
'modules' => [
    'user' => [
        'modelMap' => [
            'User' => 'app\models\User',
            'Profile' => 'app\models\Profile',
            'RegistrationForm' => 'app\models\RegistrationForm',
            'LoginForm' => 'app\models\LoginForm',
        ],
    ],
],
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã email

```php
// config/web.php
'modules' => [
    'user' => [
        'mailer' => [
            'viewPath' => '@app/mail/user',
            'sender' => ['noreply@example.com' => '–ú–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'],
            'welcomeSubject' => '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!',
            'confirmationSubject' => '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à email',
            'reconfirmationSubject' => '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å email',
            'recoverySubject' => '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å',
        ],
    ],
],
```

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã:

```
@app/mail/user/welcome.php
@app/mail/user/confirmation.php
@app/mail/user/reconfirmation.php
@app/mail/user/recovery.php
```

---

## üé¨ –°–æ–±—ã—Ç–∏—è

–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏:

```php
use yii\base\Event;
use AlexeiKaDev\Yii2User\models\User;
use AlexeiKaDev\Yii2User\events\UserEvent;

// –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
Event::on(User::class, User::EVENT_AFTER_REGISTER, function ($event) {
    /** @var User $user */
    $user = $event->user;

    // –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ
    // –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
    // –õ–æ–≥–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
    // –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
});

// –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
Event::on(User::class, User::EVENT_AFTER_CONFIRM, function ($event) {
    $user = $event->user;
    // –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
});

// –ü–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º
Event::on(User::class, User::EVENT_BEFORE_LOGIN, function ($event) {
    $user = $event->user;
    // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Ä–∞–∑—Ä–µ—à–µ–Ω –ª–∏ –≤—Ö–æ–¥
    // –õ–æ–≥–∏—Ä—É–π—Ç–µ –ø–æ–ø—ã—Ç–∫—É –≤—Ö–æ–¥–∞
});

// –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞
Event::on(User::class, User::EVENT_AFTER_LOGIN, function ($event) {
    $user = $event->user;
    // –û–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
    // –õ–æ–≥–∏—Ä—É–π—Ç–µ —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
});

// –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
Event::on(User::class, User::EVENT_AFTER_PASSWORD_CHANGE, function ($event) {
    $user = $event->user;
    // –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–∏—Å—å–º–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    // –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —Å–µ—Å—Å–∏–∏
});
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

- `EVENT_BEFORE_REGISTER`
- `EVENT_AFTER_REGISTER`
- `EVENT_BEFORE_CONFIRM`
- `EVENT_AFTER_CONFIRM`
- `EVENT_BEFORE_LOGIN`
- `EVENT_AFTER_LOGIN`
- `EVENT_BEFORE_LOGOUT`
- `EVENT_AFTER_LOGOUT`
- `EVENT_BEFORE_PASSWORD_CHANGE`
- `EVENT_AFTER_PASSWORD_CHANGE`
- `EVENT_BEFORE_ACCOUNT_DELETE`
- `EVENT_AFTER_ACCOUNT_DELETE`

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—à–∏–±–∫–∏ "–ö–ª–∞—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–ü—Ä–æ–±–ª–µ–º–∞**: PHP –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∫–ª–∞—Å—Å—ã –º–æ–¥—É–ª—è.

**–†–µ—à–µ–Ω–∏–µ**:
```bash
composer dump-autoload
php yii cache/flush-all
```

#### 2. Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç.

**–†–µ—à–µ–Ω–∏—è**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤ `config/web.php`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ SMTP
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É —Å–ø–∞–º–∞
- –í–∫–ª—é—á–∏—Ç–µ `useFileTransport` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
  ```php
  'mailer' => [
      'useFileTransport' => true, // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–∏—Å—å–º–∞ –≤ runtime/mail
  ],
  ```

#### 3. –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è OAuth –Ω–µ —É–¥–∞–µ—Ç—Å—è –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏.

**–†–µ—à–µ–Ω–∏—è**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å ID –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ–∫—Ä–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URI –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ OAuth
- –í–∫–ª—é—á–∏—Ç–µ `authClientCollection` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `authclient`

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —É–¥–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å, –æ—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏.

**–†–µ—à–µ–Ω–∏—è**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É (15 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è NIST 2025)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ email
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å

#### 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.

**–†–µ—à–µ–Ω–∏—è**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `RateLimitableInterface`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `RateLimitFilter` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫—ç—à–∞

#### 6. –ö–æ–¥—ã 2FA –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–¥—ã TOTP –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏—è**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (NTP)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ–ø—É—Å–∫ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ `verifyCode()`
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏

#### 7. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

**–†–µ—à–µ–Ω–∏—è**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
./yii migrate/create test_migration

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations --interactive=0

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
SHOW TABLES LIKE 'user%';
```

#### 8. –û—à–∏–±–∫–∏ "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–†–µ—à–µ–Ω–∏—è**:
- –î–æ–±–∞–≤—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤ `admins` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò–ª–∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ RBAC, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ `adminPermission`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `Yii::$app->user->can('permission')` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**–í: –ö–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —ç—Ç–∏–º —Ñ–æ—Ä–∫–æ–º –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º?**

–û: –≠—Ç–æ—Ç —Ñ–æ—Ä–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –ü–æ–ª–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP 7.2-8.4 (–æ—Ä–∏–≥–∏–Ω–∞–ª —Ç—Ä–µ–±—É–µ—Ç PHP 8.3+)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ 2025 (OWASP, NIST 800-63B)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É 2FA –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ WebAuthn/Passkeys
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ê–∫—Ç–∏–≤–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

**–í: –ú–æ–≥—É –ª–∏ —è –æ–±–Ω–æ–≤–∏—Ç—å—Å—è —Å dektrium/yii2-user?**

–û: –î–∞! –°–º–æ—Ç—Ä–∏—Ç–µ [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–∏](#-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–º–∏–≥—Ä–∞—Ü–∏–∏). –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –ö–æ–¥—ã —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç SHA-256 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–π—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 15 —Å–∏–º–≤–æ–ª–æ–≤
- –ù–µ–∫–æ—Ç–æ—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP 8+ —É–¥–∞–ª–µ–Ω

**–í: –ì–æ—Ç–æ–≤–æ –ª–∏ —ç—Ç–æ –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É?**

–û: –î–∞! –≠—Ç–æ—Ç –º–æ–¥—É–ª—å:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
- –°–ª–µ–¥—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Yii2
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç OWASP 2025
- –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- –ê–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

### –í–æ–ø—Ä–æ—Å—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–í: –ù–∞—Å–∫–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–∞—Ä–æ–ª—è?**

–û: –û—á–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ:
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Bcrypt —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é (10-15)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–ª–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ NIST 800-63B 2025

**–í: –î–æ–ª–∂–µ–Ω –ª–∏ —è –≤–∫–ª—é—á–∏—Ç—å 2FA?**

–û: –î–∞! –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- 99,9% —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ç–∞–∫ (–¥–∞–Ω–Ω—ã–µ Microsoft)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∞–∂–∏ –ø–∞—Ä–æ–ª—è
- –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

**–í: –ö–∞–∫–æ–≤–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è?**

–û: 15 —Å–∏–º–≤–æ–ª–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç NIST 800-63B 2025).
- –î–ª—è –æ–¥–Ω–æ—ç—Ç–∞–ø–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å 8 —Å–∏–º–≤–æ–ª–æ–≤ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ 2FA
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –º–æ–¥–µ–ª–∏ User

**–í: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã?**

–û: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞—Ç–∞–∫–∏ brute-force:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/IP
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5 –∑–∞ 60 —Å–µ–∫—É–Ω–¥)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è OWASP Top 10:2025

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**–í: –ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email?**

–û: –î–∞! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```php
'enableConfirmation' => false,
```

**–í: –ö–∞–∫ —è –º–æ–≥—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞?**

–û: –†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å LoginForm –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:
```php
'modelMap' => [
    'LoginForm' => 'app\models\LoginForm',
],
```

**–í: –ú–æ–≥—É –ª–∏ —è –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è?**

–û: –î–∞! –†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å Profile:
1. –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–æ–ª–±—Ü—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
2. –†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å Profile
3. –û–±–Ω–æ–≤–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

**–í: –ö–∞–∫ —è –º–æ–≥—É –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?**

–û: –í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:
1. –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Å—Ö–µ–º–æ–π
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ö—ç—à–∏ –ø–∞—Ä–æ–ª—è –Ω–∞ bcrypt
3. –î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Å—Ç–æ–ª–±—Ü—ã
4. –ò–ª–∏ —Ä–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å User –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∞—à–µ–π —Å—Ö–µ–º–æ–π

**–í: –ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –∏–ª–∏ SQLite?**

–û: –î–∞! –ú–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- MySQL 5.7+
- MariaDB 10.2+
- PostgreSQL 9.6+
- SQLite 3

**–í: –ö–∞–∫ —è –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ OAuth?**

–û: –†–∞—Å—à–∏—Ä—å—Ç–µ `yii\authclient\OAuth2`:
```php
class CustomProvider extends \yii\authclient\OAuth2
{
    // –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã
}
```

---

## üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –° dektrium/yii2-user

#### –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Composer

```bash
composer remove dektrium/yii2-user
composer require alexeikadev/yii2-user "dev-master"
```

#### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

```bash
./yii migrate/up --migrationPath=@vendor/alexeikadev/yii2-user/migrations
```

–ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç:
- `two_factor_enabled`, `two_factor_secret` (–¥–ª—è 2FA)
- `allowance`, `allowance_updated_at` (–¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã)

#### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω

–ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –≤ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```php
// –°—Ç–∞—Ä–æ–µ
'class' => 'dektrium\user\Module',
'identityClass' => 'dektrium\user\models\User',

// –ù–æ–≤–æ–µ
'class' => 'AlexeiKaDev\Yii2User\Module',
'identityClass' => 'AlexeiKaDev\Yii2User\models\User',
```

#### –®–∞–≥ 4: –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Å MD5 –Ω–∞ SHA-256:

```sql
-- –í–∞—Ä–∏–∞–Ω—Ç A: –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–π—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
TRUNCATE TABLE social_account;

-- –í–∞—Ä–∏–∞–Ω—Ç B: –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥—ã
UPDATE social_account SET code = NULL;
```

#### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –ø–∞—Ä–æ–ª—é

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω —Å 6 –Ω–∞ 15 —Å–∏–º–≤–æ–ª–æ–≤:
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤—Ö–æ–¥–∏—Ç—å
- –î–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–º–µ–Ω–µ
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç 15+ —Å–∏–º–≤–æ–ª–æ–≤

#### –®–∞–≥ 6: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
./yii cache/flush-all

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- –í—Ö–æ–¥/–≤—ã—Ö–æ–¥
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
- –§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```

---

## üêò –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π PHP

| –í–µ—Ä—Å–∏—è PHP | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|------------|--------|-----------|
| 7.2 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 7.3 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 7.4 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 8.0 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 8.1 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 8.2 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 8.3 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |
| 8.4 | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**:
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP 8+
- –ù–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã—Ö —Ç–∏–ø–æ–≤, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∏–ª–∏ —Ç–∏–ø–æ–≤ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å –Ω–∞—Å–ª–µ–¥–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π PHP 7.2, —Ç–∞–∫ –∏ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ PHP 8.4
- –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π

---

## üìú –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:

- **OWASP Top 10:2025** (RC1 - –Ω–æ—è–±—Ä—å 2025)
  - A07: –û—à–∏–±–∫–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –†–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- **NIST 800-63B (2025)** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –ú–∏–Ω–∏–º—É–º 15 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø–∞—Ä–æ–ª–µ–π (–æ–¥–Ω–æ—ç—Ç–∞–ø–Ω–∞—è)
  - –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤ —Å MFA
  - –ë–µ–∑ –ø—Ä–∞–≤–∏–ª —Å–æ—Å—Ç–∞–≤–∞ (–ø—Ä–æ–ø–∏—Å–Ω—ã–µ, —Ü–∏—Ñ—Ä—ã, —Å–∏–º–≤–æ–ª—ã)
  - –ë–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
  - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ —á–µ—Ä–Ω—ã–µ —Å–ø–∏—Å–∫–∏

- **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ PHP 2025**
  - –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ó–∞—â–∏—Ç–∞ –æ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π OWASP Top 10

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ì–æ—Ç–æ–≤–æ –∫ GDPR**
  - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü—Ä–∞–≤–æ –Ω–∞ –∑–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å
  - –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å CCPA**
  - –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º
  - –ú–µ—Ö–∞–Ω–∏–∑–º—ã –æ—Ç–∫–∞–∑–∞
  - –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
composer install
./vendor/bin/codecept run
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
./vendor/bin/codecept run unit

# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
./vendor/bin/codecept run functional

# –ü—Ä–∏–µ–º–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
./vendor/bin/codecept run acceptance
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

```bash
./vendor/bin/codecept run --coverage --coverage-html
```

---

## ü§ù –í–Ω–µ—Å–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∞

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥! –í–æ—Ç –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–æ—á—å:

### –°–ø–æ—Å–æ–±—ã –≤–Ω–µ—Å–µ–Ω–∏—è –≤–∫–ª–∞–¥–∞

- –°–æ–æ–±—â–∞–π—Ç–µ –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –£–ª—É—á—à–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–ª–∏—è–Ω–∏–µ
- –î–∞–≤–∞–π—Ç–µ –∑–≤–µ–∑–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –§–æ—Ä–∫–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m '–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ç—Ä—è—Å–∞—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–ª–∏—è–Ω–∏–µ

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- –°–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è PSR-12
- –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP 7.2

### –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∫–ª—é—á–∏—Ç–µ:
- –í–µ—Ä—Å–∏—é PHP
- –í–µ—Ä—Å–∏—é Yii2
- –í–µ—Ä—Å–∏—é –º–æ–¥—É–ª—è
- –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –û–∂–∏–¥–∞–µ–º–æ–µ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏–ª–∏ –ª–æ–≥–∏

---

## üëè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ—Ä**: [Dmitry Erofeev](https://github.com/dmeroff)
- **–°–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–π —Ñ–æ—Ä–∫–∞**: [AlexeiKaDev](https://github.com/AlexeiKaDev)
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç**: [dektrium/yii2-user](https://github.com/dektrium/yii2-user)

### –£—á–∞—Å—Ç–Ω–∏–∫–∏

–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–ª–∏ —É–ª—É—á—à–∏—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å!

### –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ

- –ö–æ–º–∞–Ω–¥–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Yii2
- –§–æ–Ω–¥ OWASP
- –§—Ä–µ–π–º–≤–æ—Ä–∫ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ NIST
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**.

```
MIT License

Copyright (c) 2025 AlexeiKaDev
Copyright (c) 2014-2023 Dmitry Erofeev

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

–°–º–æ—Ç—Ä–∏—Ç–µ [LICENSE.md](LICENSE.md) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/README.md)
- üìù [–ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π](CHANGELOG.md)
- üîÑ [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](UPGRADE.md)
- üí¨ [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API.md)

### –°–æ–æ–±—â–µ—Å—Ç–≤–æ

- üêõ [–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–±–ª–µ–º](https://github.com/AlexeiKaDev/yii2-user/issues)
- üí¨ [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/AlexeiKaDev/yii2-user/discussions)
- üìß [–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ email](mailto:alexei.ka.dev@example.com)

### –†–µ—Å—É—Ä—Å—ã

- [–§—Ä–µ–π–º–≤–æ—Ä–∫ Yii2](https://www.yiiframework.com/)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Yii2](https://www.yiiframework.com/doc/guide/2.0/ru)
- [OWASP Top 10](https://owasp.org/Top10/)
- [NIST 800-63B](https://pages.nist.gov/800-63-4/sp800-63b.html)

---

<div align="center">

**–ï—Å–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–º–æ–≥–∞–µ—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–∞–π—Ç–µ –µ–º—É –∑–≤–µ–∑–¥—É!**

–°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é [AlexeiKaDev](https://github.com/AlexeiKaDev)

[–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ](https://github.com/AlexeiKaDev/yii2-user/issues) ¬∑
[–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é](https://github.com/AlexeiKaDev/yii2-user/issues) ¬∑
[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/README.md)

</div>
